(function(){var t;(t=function(t){return"object"==typeof exports&&"object"==typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){var e,a;return e=function(e,a){return function(r,i){var n,o,l,h,s,d,g,c,u,p,C,f,v,w,A,S,y,x,m,b,j,T,k,z,B,U,L,F,E,I,q,D,R,W,K,N,P,_;if(u={localeStrings:{vs:"vs",by:"by",and:"and",openAsImage:"As image"},gchart:{}},i=t.extend(!0,u,i),null==(o=i.gchart).width&&(o.width=window.innerWidth/1.4),q=r.getRowKeys(),0===q.length&&q.push([]),s=r.getColKeys(),0===s.length&&s.push([]),C=t.pivotUtilities.locales[i.lang].aggregatorTrans[r.aggregatorName],r.valAttrs.length&&(C+="("+r.valAttrs.join(", ")+")"),A=function(){var t,e,a;for(a=[],t=0,e=q.length;e>t;t++)v=q[t],a.push(v.join("-"));return a}(),A.unshift(""),B=0,"ScatterChart"===e){g=[],L=r.tree;for(_ in L){R=L[_];for(P in R)n=R[P],g.push([parseFloat(P),parseFloat(_),C+": \n"+n.format(n.value())])}c=new google.visualization.DataTable,c.addColumn("number",r.colAttrs.join("-")),c.addColumn("number",r.rowAttrs.join("-")),c.addColumn({type:"string",role:"tooltip"}),c.addRows(g),w=r.colAttrs.join("-"),W=r.rowAttrs.join("-"),D=""}else{for(g=[A],S=0,j=s.length;j>S;S++){for(h=s[S],E=[h.join("-")],B+=E[0].length,x=0,T=q.length;T>x;x++)I=q[x],n=r.getAggregator(I,h),null!=n.value()?(K=n.value(),t.isNumeric(K)?1>K?E.push(parseFloat(K.toPrecision(3))):E.push(parseFloat(K.toFixed(3))):E.push(K)):E.push(null);g.push(E)}for(z=0,m=0,k=q.length;k>m;m++)I=q[m],b=I.join("-").length,b>z&&(z=b);c=google.visualization.arrayToDataTable(g),D=W=C,w=r.colAttrs.join("-"),f=r.rowAttrs.join("-"),""===w&&""===f||(D+=" "+i.localeStrings.by,""!==w&&(D+=" "+w),""!==w&&""!==f&&(D+=" "+i.localeStrings.and),""!==f&&(D+=" "+f))}return d={fontSize:13},U={title:D,hAxis:{title:w,slantedText:B>50,textStyle:d,titleTextStyle:d},vAxis:{title:W,textStyle:d,titleTextStyle:d},height:800,chartArea:{width:"80%",top:"60",height:500},tooltip:{textStyle:d},titleTextStyle:{fontSize:16},annotations:{textStyle:d},legend:{textStyle:d}},"ColumnChart"===e&&(U.vAxis.minValue=0),"ScatterChart"===e?(U.legend={position:"none"},U.chartArea={width:"80%",height:"80%"}):2===g[0].length&&""===g[0][1]&&(U.legend={position:"none"}),t.extend(U,i.gchart,a),"ScatterChart"!==e&&(U.chartArea.width=40*s.length,U.chartArea.width<500&&(U.chartArea.width=500),U.width=U.chartArea.width+200,z>4&&(U.width+=6*z,U.chartArea.left=100),q.length>22&&(p=6*(q.length-22),U.height+=p,U.chartArea.height+=p)),F=t("<div>").css({width:"100%",height:"100%",position:"relative"}),l=t("<div></div>").css({width:"100%",height:"800px"}),y=t('<div><a class="btn btn-sm btn-default"><i class="fa fa-picture-o fa-fw"></i> '+i.localeStrings.openAsImage+"</a></div>").css({position:"absolute",top:"10px",right:"10px"}),t(F[0]).append(l,y),N=new google.visualization.ChartWrapper({dataTable:c,chartType:e,options:U}),N.draw(l[0]),y.bind("click",function(){return window.open(N.getChart().getImageURI(),"_blank")}),l.bind("dblclick",function(){var t;return google.visualization.hasOwnProperty("ChartEditor")&&"function"===google.visualization.ChartEditor?(t=new google.visualization.ChartEditor,google.visualization.events.addListener(t,"ok",function(){return t.getChartWrapper().draw(l[0])}),t.openDialog(N)):console.log("ChartEditor not loaded")}),F}},t.pivotUtilities.gchart_renderers={"Line Chart":e("LineChart"),"Bar Chart":e("ColumnChart"),"Stacked Bar Chart":e("ColumnChart",{isStacked:!0}),"Area Chart":e("AreaChart",{isStacked:!0}),"Scatter Chart":e("ScatterChart")},a={"Line Chart":"Line Chart","Bar Chart":"Bar Chart","Stacked Bar Chart":"Stacked Bar Chart","Area Chart":"Area Chart","Scatter Chart":"Scatter Chart"},t.pivotUtilities.locales.en.rendererTrans=t.extend(t.pivotUtilities.locales.en.rendererTrans,a),a={"Line Chart":"Линейчатый график","Bar Chart":"Гистограмма","Stacked Bar Chart":"Гистограмма с накоплением","Area Chart":"Диаграммма с областями","Scatter Chart":"Точечная диаграмма"},t.pivotUtilities.locales.ru.rendererTrans=t.extend(t.pivotUtilities.locales.ru.rendererTrans,a)})}).call(this);
//# sourceMappingURL=gchart_renderers.min.js.map
