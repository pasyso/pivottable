(function(){var t,e;t=function(t){return"object"==typeof exports&&"object"==typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)},e=function(t){var e,a;return e="<iframe src='"+t+'\'  style="border:0; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" allowfullscreen></iframe>',a=window.open(),a.document.open(),a.document.write(e),a.document.close()},t(function(t){var a,r;return a=function(a,r){return function(i,n){var o,l,s,h,d,g,c,u,p,C,v,f,w,S,m,A,y,T,x,b,j,U,k,z,B,L,F,E,I,q,D,R,V,W,K,N,P,O;if(p={localeStrings:{vs:"vs",by:"by",and:"and",openAsImage:"As image"},gchart:{}},n=t.extend(!0,p,n),null==(l=n.gchart).width&&(l.width=window.innerWidth/1.4),D=i.getRowKeys(),0===D.length&&D.push([]),d=i.getColKeys(),0===d.length&&d.push([]),v=t.pivotUtilities.locales[n.lang].aggregatorTrans[i.aggregatorName],i.valAttrs.length&&(v+="("+i.valAttrs.join(", ")+")"),m=function(){var e,a,r;for(r=[],e=0,a=D.length;e<a;e++)w=D[e],r.push(t.pivotUtilities.getValueTranslation(w,n.localeStrings).join("-"));return r}(),m.unshift(""),B=0,"ScatterChart"===a){c=[],F=i.tree;for(O in F){V=F[O];for(P in V)o=V[P],c.push([parseFloat(P),parseFloat(O),v+": \n"+o.format(o.value())])}u=new google.visualization.DataTable,S=t.pivotUtilities.getTranslation(i.colAttrs,n.dataTrans).join("-"),W=t.pivotUtilities.getTranslation(i.rowAttrs,n.dataTrans).join("-"),u.addColumn("number",S),u.addColumn("number",W),u.addColumn({type:"string",role:"tooltip"}),u.addRows(c),R=""}else{for(c=[m],A=0,j=d.length;A<j;A++){for(h=d[A],I=[t.pivotUtilities.getValueTranslation(h,n.localeStrings).join("-")],B+=I[0].length,T=0,U=D.length;T<U;T++)q=D[T],o=i.getAggregator(q,h),null!=o.value()?(K=o.value(),t.isNumeric(K)?K<1?I.push(parseFloat(K.toPrecision(3))):I.push(parseFloat(K.toFixed(3))):I.push(K)):I.push(null);c.push(I)}for(z=0,x=0,k=D.length;x<k;x++)q=D[x],b=q.join("-").length,z<b&&(z=b);u=google.visualization.arrayToDataTable(c),R=W=v,S=t.pivotUtilities.getTranslation(i.colAttrs,n.dataTrans).join("-"),f=t.pivotUtilities.getTranslation(i.rowAttrs,n.dataTrans).join("-"),""===S&&""===f||(R+=" "+n.localeStrings.by,""!==S&&(R+=" "+S),""!==S&&""!==f&&(R+=" "+n.localeStrings.and),""!==f&&(R+=" "+f))}return g={fontSize:13},L={title:R,hAxis:{title:S,slantedText:B>50,textStyle:g,titleTextStyle:g},vAxis:{title:W,textStyle:g,titleTextStyle:g},height:800,chartArea:{width:"80%",top:"60",height:500},tooltip:{textStyle:g},titleTextStyle:{fontSize:16},annotations:{textStyle:g},legend:{textStyle:g}},"ColumnChart"===a&&(L.vAxis.minValue=0),"ScatterChart"===a?(L.legend={position:"none"},L.chartArea={width:"80%",height:"80%"}):2===c[0].length&&""===c[0][1]&&(L.legend={position:"none"}),t.extend(L,n.gchart,r),"ScatterChart"!==a&&(L.chartArea.width=40*d.length,L.chartArea.width<500&&(L.chartArea.width=500),L.width=L.chartArea.width+200,z>4&&(L.width+=6*z,L.chartArea.left=100),D.length>22&&(C=6*(D.length-22),L.height+=C,L.chartArea.height+=C)),E=t("<div>").css({width:"100%",height:"100%",position:"relative"}),s=t("<div></div>").css({width:"100%",height:"800px"}),y=t('<div><a class="btn btn-sm btn-default"><i class="far fa-image fa-fw"></i> '+n.localeStrings.openAsImage+"</a></div>").css({position:"absolute",top:"10px",right:"10px"}),t(E[0]).append(s,y),N=new google.visualization.ChartWrapper({dataTable:u,chartType:a,options:L}),N.draw(s[0]),y.bind("click",function(){return e(N.getChart().getImageURI())}),s.bind("dblclick",function(){var t;return google.visualization.hasOwnProperty("ChartEditor")&&"function"===google.visualization.ChartEditor?(t=new google.visualization.ChartEditor,google.visualization.events.addListener(t,"ok",function(){return t.getChartWrapper().draw(s[0])}),t.openDialog(N)):console.log("ChartEditor not loaded")}),E}},t.pivotUtilities.gchart_renderers={"Line Chart":a("LineChart"),"Bar Chart":a("ColumnChart"),"Stacked Bar Chart":a("ColumnChart",{isStacked:!0}),"Area Chart":a("AreaChart",{isStacked:!0}),"Scatter Chart":a("ScatterChart")},r={"Line Chart":"Line Chart","Bar Chart":"Bar Chart","Stacked Bar Chart":"Stacked Bar Chart","Area Chart":"Area Chart","Scatter Chart":"Scatter Chart"},t.pivotUtilities.locales.en.rendererTrans=t.extend(t.pivotUtilities.locales.en.rendererTrans,r),r={"Line Chart":"Линейчатый график","Bar Chart":"Гистограмма","Stacked Bar Chart":"Гистограмма с накоплением","Area Chart":"Диаграммма с областями","Scatter Chart":"Точечная диаграмма"},t.pivotUtilities.locales.ru.rendererTrans=t.extend(t.pivotUtilities.locales.ru.rendererTrans,r)})}).call(this);
//# sourceMappingURL=gchart_renderers.min.js.map
