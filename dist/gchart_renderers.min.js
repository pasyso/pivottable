(function(){var t;(t=function(t){return"object"==typeof exports&&"object"==typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){var e,a;return e=function(e,a){return function(r,i){var n,o,l,s,h,g,d,c,u,p,C,v,f,S,w,A,T,y,x,m,b,j,U,k,z,B,L,F,E,I,q,D,R,V,W,K,N,P;if(u={localeStrings:{vs:"vs",by:"by",and:"and",openAsImage:"As image"},gchart:{}},i=t.extend(!0,u,i),null==(o=i.gchart).width&&(o.width=window.innerWidth/1.4),q=r.getRowKeys(),0===q.length&&q.push([]),h=r.getColKeys(),0===h.length&&h.push([]),C=t.pivotUtilities.locales[i.lang].aggregatorTrans[r.aggregatorName],r.valAttrs.length&&(C+="("+r.valAttrs.join(", ")+")"),w=function(){var e,a,r;for(r=[],e=0,a=q.length;e<a;e++)f=q[e],r.push(t.pivotUtilities.getValueTranslation(f,i.localeStrings).join("-"));return r}(),w.unshift(""),z=0,"ScatterChart"===e){d=[],L=r.tree;for(P in L){R=L[P];for(N in R)n=R[N],d.push([parseFloat(N),parseFloat(P),C+": \n"+n.format(n.value())])}c=new google.visualization.DataTable,S=t.pivotUtilities.getTranslation(r.colAttrs,i.dataTrans).join("-"),V=t.pivotUtilities.getTranslation(r.rowAttrs,i.dataTrans).join("-"),c.addColumn("number",S),c.addColumn("number",V),c.addColumn({type:"string",role:"tooltip"}),c.addRows(d),D=""}else{for(d=[w],A=0,b=h.length;A<b;A++){for(s=h[A],E=[t.pivotUtilities.getValueTranslation(s,i.localeStrings).join("-")],z+=E[0].length,y=0,j=q.length;y<j;y++)I=q[y],n=r.getAggregator(I,s),null!=n.value()?(W=n.value(),t.isNumeric(W)?W<1?E.push(parseFloat(W.toPrecision(3))):E.push(parseFloat(W.toFixed(3))):E.push(W)):E.push(null);d.push(E)}for(k=0,x=0,U=q.length;x<U;x++)I=q[x],m=I.join("-").length,k<m&&(k=m);c=google.visualization.arrayToDataTable(d),D=V=C,S=t.pivotUtilities.getTranslation(r.colAttrs,i.dataTrans).join("-"),v=t.pivotUtilities.getTranslation(r.rowAttrs,i.dataTrans).join("-"),""===S&&""===v||(D+=" "+i.localeStrings.by,""!==S&&(D+=" "+S),""!==S&&""!==v&&(D+=" "+i.localeStrings.and),""!==v&&(D+=" "+v))}return g={fontSize:13},B={title:D,hAxis:{title:S,slantedText:z>50,textStyle:g,titleTextStyle:g},vAxis:{title:V,textStyle:g,titleTextStyle:g},height:800,chartArea:{width:"80%",top:"60",height:500},tooltip:{textStyle:g},titleTextStyle:{fontSize:16},annotations:{textStyle:g},legend:{textStyle:g}},"ColumnChart"===e&&(B.vAxis.minValue=0),"ScatterChart"===e?(B.legend={position:"none"},B.chartArea={width:"80%",height:"80%"}):2===d[0].length&&""===d[0][1]&&(B.legend={position:"none"}),t.extend(B,i.gchart,a),"ScatterChart"!==e&&(B.chartArea.width=40*h.length,B.chartArea.width<500&&(B.chartArea.width=500),B.width=B.chartArea.width+200,k>4&&(B.width+=6*k,B.chartArea.left=100),q.length>22&&(p=6*(q.length-22),B.height+=p,B.chartArea.height+=p)),F=t("<div>").css({width:"100%",height:"100%",position:"relative"}),l=t("<div></div>").css({width:"100%",height:"800px"}),T=t('<div><a class="btn btn-sm btn-default"><i class="fa fa-picture-o fa-fw"></i> '+i.localeStrings.openAsImage+"</a></div>").css({position:"absolute",top:"10px",right:"10px"}),t(F[0]).append(l,T),K=new google.visualization.ChartWrapper({dataTable:c,chartType:e,options:B}),K.draw(l[0]),T.bind("click",function(){return window.open(K.getChart().getImageURI(),"_blank")}),l.bind("dblclick",function(){var t;return google.visualization.hasOwnProperty("ChartEditor")&&"function"===google.visualization.ChartEditor?(t=new google.visualization.ChartEditor,google.visualization.events.addListener(t,"ok",function(){return t.getChartWrapper().draw(l[0])}),t.openDialog(K)):console.log("ChartEditor not loaded")}),F}},t.pivotUtilities.gchart_renderers={"Line Chart":e("LineChart"),"Bar Chart":e("ColumnChart"),"Stacked Bar Chart":e("ColumnChart",{isStacked:!0}),"Area Chart":e("AreaChart",{isStacked:!0}),"Scatter Chart":e("ScatterChart")},a={"Line Chart":"Line Chart","Bar Chart":"Bar Chart","Stacked Bar Chart":"Stacked Bar Chart","Area Chart":"Area Chart","Scatter Chart":"Scatter Chart"},t.pivotUtilities.locales.en.rendererTrans=t.extend(t.pivotUtilities.locales.en.rendererTrans,a),a={"Line Chart":"Линейчатый график","Bar Chart":"Гистограмма","Stacked Bar Chart":"Гистограмма с накоплением","Area Chart":"Диаграммма с областями","Scatter Chart":"Точечная диаграмма"},t.pivotUtilities.locales.ru.rendererTrans=t.extend(t.pivotUtilities.locales.ru.rendererTrans,a)})}).call(this);
//# sourceMappingURL=gchart_renderers.min.js.map
